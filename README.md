# BookLovers Backend (–±–µ–∑ Docker)

–¶–µ –±–µ–∫–µ–Ω–¥ –¥–ª—è —Ç–≤–æ—î—ó –∫–Ω–∏–∂–∫–æ–≤–æ—ó –∞–ø–∫–∏. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–∏ —Ä–æ–±–∏—à —Å–∞–º üî•

## –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –≤—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (JWT —Ç–æ–∫–µ–Ω–∏)
- –ü–µ—Ä–µ–≥–ª—è–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é (`/api/users/me`)
- –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é (—ñ–º'—è, –±—ñ–æ, –Ω—ñ–∫–Ω–µ–π–º)
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è / –∑–º—ñ–Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏
- –î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–Ω–∏–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –°–ø–∏—Å–æ–∫ —Å–≤–æ—ó—Ö –∫–Ω–∏–≥

–í—Å–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ SQLite –±–∞–∑—ñ (`db.sqlite` —Ñ–∞–π–ª —É –ø–∞–ø—Ü—ñ `backend`).

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- Node.js + Express
- SQLite (—á–µ—Ä–µ–∑ `sqlite3`)
- JWT (`jsonwebtoken`)
- –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤: `bcryptjs`
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤: `multer`
- CORS –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

–ù—ñ—è–∫–æ–≥–æ Docker ‚úÖ

---

## –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ –≤ —Ç–µ–±–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Node.js 18+**.

2. –†–æ–∑–ø–∞–∫—É–π —Ü–µ–π zip:

```bash
unzip booklovers_backend.zip
cd booklovers_backend
```

3. –í—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
cd backend
npm install
```

4. (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –°—Ç–≤–æ—Ä–∏ `.env` —Ñ–∞–π–ª –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

```env
PORT=3000
CLIENT_ORIGIN=http://localhost:5173
JWT_SECRET=your_secret_key_here_change_in_production
```

–Ø–∫—â–æ `.env` —Ñ–∞–π–ª—É –Ω–µ–º–∞—î, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

5. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π –±–∞–∑—É (—Å—Ç–≤–æ—Ä–∏—Ç—å `db.sqlite` —Ç–∞ —Ç–∞–±–ª–∏—Ü—ñ):

```bash
npm run init-db
```

6. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev   # –∑ nodemon
# –∞–±–æ
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Å–ª—É—Ö–∞—î –Ω–∞ `http://localhost:3000`.

---

## API

### Auth

#### POST `/api/auth/register`

Body (JSON):

```json
{
  "email": "user@example.com",
  "password": "123456",
  "name": "John Doe"
}
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å:

```json
{
  "token": "JWT_TOKEN",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "John Doe",
    "username": null,
    "bio": null,
    "avatarUrl": null
  }
}
```

#### POST `/api/auth/login`

Body (JSON):

```json
{
  "email": "user@example.com",
  "password": "123456"
}
```

---

### –ü—Ä–æ—Ñ—ñ–ª—å

> –£ –≤—Å—ñ –∑–∞–ø–∏—Ç–∏ –Ω–∏–∂—á–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
>
> `Authorization: Bearer JWT_TOKEN`

#### GET `/api/users/me`

–û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

#### PUT `/api/users/me`

–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å.

Body (JSON):

```json
{
  "name": "New Name",
  "username": "nickname",
  "bio": "I love books!"
}
```

#### POST `/api/users/me/avatar`

–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏/–æ–Ω–æ–≤–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä–∫—É.

- Content-Type: `multipart/form-data`
- –ü–æ–ª–µ —Ñ–∞–π–ª—É: `avatar`

–í—ñ–¥–ø–æ–≤—ñ–¥—å –º—ñ—Å—Ç–∏—Ç–∏–º–µ –Ω–æ–≤–∏–π `avatarUrl`. –¶–µ–π URL –º–æ–∂–Ω–∞ –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç—ñ.

---

### –ö–Ω–∏–≥–∏

#### GET `/api/books`

–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

#### POST `/api/books`

Body (JSON):

```json
{
  "title": "The Pragmatic Programmer",
  "author": "Andy Hunt, Dave Thomas",
  "description": "Awesome book about software craftsmanship"
}
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äì —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∫–Ω–∏–≥–∞.

---

## –Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Å–≤—ñ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

- –ó–∞–ø—É—Å–∫–∞—î—à —Ñ—Ä–æ–Ω—Ç –Ω–∞ `http://localhost:5173` (–∞–±–æ –∑–º—ñ–Ω—é—î—à `CLIENT_ORIGIN` —É `.env`).
- –£—Å—ñ –∑–∞–ø–∏—Ç–∏ –Ω–∞ –±–µ–∫–µ–Ω–¥ ‚Äî –Ω–∞ `http://localhost:3000/api/...`.
- –ü—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É –∑–±–µ—Ä—ñ–≥–∞—î—à `token` —É localStorage/–∑–º—ñ–Ω–Ω—ñ–π —Å—Ç–∞–Ω—É.
- –î–æ–¥–∞—î—à `Authorization: Bearer ${token}` –¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö —Ä–æ—É—Ç—ñ–≤.

–Ø–∫—â–æ —Ç—Ä–µ–±–∞, –º–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é —Ç–≤–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –∑ —Ü–∏–º API.